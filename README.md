# Bloggen 

Bloggen is a static website generation tool that generates websites from plaintext files, with support for generating simple blogs.

Bloggen works by parsing text files containing metadata and marked up text and generating HTML files from the passed information.

Bloggen has a simple template system, a simple macro system, and a simple metadata format. 

Blogs are generated by reading a separate text file with a list of the blog entries in chronological order, and generating a listing of the titles of the blog entries.

## Configuration

Configuration of the system is stored in a single, JSON encoded file.

Below is an example:

	{
		"macros": {
		    "title": "My Cute Website",
		    "root": "https://mycutewebsite.com",
		    "footer": "My Cute Website is licensed under a CC BY-NC license.",
		    "lang": "en-ca",
		    "description": "A website which contains all of my thoughts!"
		},
        "blog_limit": 6,
        "blog_path": "blog"
	}

The system block describes how the system is laid out.

- `blog_path` points to the subdirectory in the site root that the blog exists in. If not set, no RSS feed or archives page will be generated. 
- `blog_limit` specifies the number of blog posts to show on the listing, before the archives.

The site block contains macros that will be used throughout the system. For instance, for the `title` key value, all occurrences of `$TITLE` will be replaced with "My Cute Website".

## Page Format

Every page on a Bloggen generated website is rendered from a `.text` file in the site path.

For instance, to create `readme.html`, one would create `readme.text` with the metadata required to render `readme.html`.  
  
Metadata is always stored at the start of the file, above the actual content, and the separation is indicated by a `---` or a  `===`.

In this instance, a blog post might have the following metadata:

    Title: New Post
    Date: 2015-05-08 12:22
    Template: post
    ---

This indicates that the post will show up in the archives as being posted on May 8th, 2015 at 12:22.

Regular pages don’t need `Date` or `Template` tags, but `Title` tags are always necessary.  

For instance:

    Title: Projects
    ---

`Template` tags will determine what template to render around the content. More on templates below.

## Template Files

### Regular Templates

The template system is incredibly simple. By default, all rendered content prepends the template stored in `header.html` and appends the template stored in `footer.html`.
  
So effectively:

	header.html
	(content rendered from the .text file)
	footer.html

Would be the default template.  
    
The template system works by looking for files in the templates store that fit the pattern `header-template.html` and `footer-template.html`. 

So for instance, a page with the template “intro” looks for `header-intro.html` and `footer-intro.html`, falling back to the default `header.html` and `footer.html`.

The rendering procedure would be:

	header-intro.html
	content (rendered from the archive page)
	footer-intro.html


### Latest Blog Posts

To support rendering multiple posts on one page, the blog archives uses `post.html` to render the individual post inline. In this case, the rendered Page content is stored in the `$CONTENT` macro. 

	header-blog.html
	post.html (Newest post content rendered and passed as $CONTENT)
	post.html (second newest post)
	post.html (third newest)
	...
	footer-blog.html

### RSS Templates

There is a separate set of headers and footers, and a post template specifically for rendering RSS. 

	header.xml
	post.xml
	footer.xml

This works identically to how the *Latest Blog Posts* page is generated.

### Default Templates

- `archive` - The blog archive page uses this template.
- `blog` - The style for the blog index page.

## Macros 

Everything page rendered by Bloggen is run through the macro system before being rendered. The page, template, even the archives page generated by the code. 

Macros are specified in the code by starting with a dollar sign, followed by the name of the macro. The name of the macro can only be made of uppercase characters.

For instance:

	<h1>$TITLE</h1>

In this example, the above tag would become:

	<h1>My Cute Website</h1>

during page generation.

## Running a blog using Bloggen

Running a blog requires specifying the `blog_path` key in the System block of `site.conf`.

The individual blog posts will be rendered as usual (like any other page in the system), but three additional pages will be generated in the blog path as well.

These pages are:

- `index.html` - The resulting blog index (reverse chronological blog posts on one page, up to `blog_limit`)
- `rss.xml` - The blog's RSS feed.
- `archives.html` - The archive page, showing a list of all posts sorted by month.

### Publishing posts

Creating new posts is quite easy. Simply create an `index.text` file in a directory in the `blog_path`, along with any content you want to post as well (pictures, etc.) The name of that directory will determine the "slug" that this blog post will be found at online.
  
Like every page rendered by `bloggen`, blog posts will need to have metadata at the start of the post describing the entry. For example:

	Title: New Post
	Date: 2015-05-08 12:22
	Template: post
	---
